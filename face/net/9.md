跨站请求伪造（Cross-Site Request Forgery，CSRF）是一种网络安全漏洞，攻击者利用用户已认证的身份，在用户不知情的情况下向目标网站发送恶意请求，以执行未经用户授权的操作。以下是CSRF攻击的一般过程以及对应的防御方法：

### CSRF攻击过程：

1.  **获取受害者身份信息**：攻击者需获取受害者的身份信息，包括Cookie或其他认证信息。
    
2.  **构造恶意请求**：攻击者在第三方网站上构造恶意请求，其中包含目标网站的请求，比如修改密码、转账等操作。
    
3.  **诱使受害者触发请求**：攻击者通过各种方式诱使受害者在已认证的情况下访问包含恶意请求的页面，比如点击链接、访问图片等。
    
4.  **执行恶意操作**：受害者的浏览器在携带受害者身份信息的情况下向目标网站发送恶意请求，执行攻击者预设的操作。
    

### 防御CSRF攻击的方法：

1.  **同源检测**：在处理敏感操作时，验证请求的来源是否与目标网站的域名一致。可以通过检查Referer头部或自定义token来确保请求来自合法的网站。
    
2.  **CSRF Token**：为每个用户生成一个唯一的CSRF Token，并将其嵌入到表单或请求中。服务器在接收请求时验证Token的有效性，防止CSRF攻击。
    
3.  **使用POST请求**：敏感操作应该使用POST请求而不是GET请求，因为CSRF攻击通常利用GET请求的特性来实施攻击。
    
4.  **使用Cookie属性：** 在Cookie中设置SameSite属性为Strict或Lax，限制第三方网站对Cookie的访问，从而降低CSRF攻击的风险。
    
5.  **双重确认**：对于一些敏感操作，可以要求用户进行双重确认，比如输入密码、短信验证码等，以确保用户的真实意图。
    

通过以上防御方法，可以有效减少CSRF攻击的风险，保护用户的信息安全和网站的完整性。及时更新和维护网站的安全策略对于防范CSRF攻击也至关重要。