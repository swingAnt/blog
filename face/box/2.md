## 浏览器页面的渲染机制涉及到多个步骤
包括从服务器获取页面资源、解析 HTML、构建 DOM 树、计算 CSS 样式、布局和绘制等。以下是浏览器页面渲染的一般过程：

1.  **获取页面资源**：浏览器首先向服务器发送请求获取页面的 HTML、CSS、JavaScript 文件以及其他资源（如图片、字体等）。
    
2.  **解析 HTML**：浏览器会逐行解析 HTML 文件，构建 DOM（文档对象模型）树。DOM 树是表示页面结构的树形结构，包括 HTML 元素、属性和它们之间的关系。
    
3.  **解析 CSS**：浏览器解析 CSS 文件，构建 CSSOM（CSS 对象模型）树。CSSOM 树描述了每个元素的样式信息。
    
4.  **合并 DOM 和 CSSOM**：浏览器将 DOM 树和 CSSOM 树合并成一个渲染树（Render Tree），渲染树中包含了需要显示的所有元素及其样式信息。
    
5.  **布局（Layout）**：浏览器根据渲染树计算每个元素在屏幕上的位置和大小，这个过程也被称为回流（reflow）或排版（layout）。
    
6.  **绘制（Painting）**：浏览器根据计算好的位置和大小信息，将每个元素绘制到屏幕上，这个过程也被称为重绘（repaint）。
    
7.  **合成（Composite）**：浏览器将绘制好的元素按照正确的顺序合成到屏幕上，确保元素的层叠关系和透明度等效果正确显示。
    

在实际渲染过程中，为了提高性能和用户体验，浏览器会采取一些优化措施，如异步加载资源、预加载、缓存、懒加载、CSS 精灵、合并压缩文件等。同时，现代浏览器还支持硬件加速、Web Workers 等技术来加速页面渲染和提高用户交互体验。

## 浏览器有GUI渲染线程与JS引擎线程，这两个线程是互斥的关系
JavaScript的加载、解析与执行会阻塞DOM的构建。也就是说，在构建DOM时，HTML解析器若遇到了JavaScript，那么它会暂停构建DOM，将控制权移交给JavaScript引擎，等JavaScript引擎运行完毕，浏览器再从中断的地方恢复DOM构建
但是如果遇到带有async和defer的script标签，就会异步请求这些资源，不会阻塞页面渲染
浏览器渲染过程分为：构建DOM -> 构建CSSOM -> 构建渲染树 -> layout布局 -> 绘制

